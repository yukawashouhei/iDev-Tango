//
//  CompletionMessageService.swift
//  iDev Tango
//
//  å­¦ç¿’å®Œäº†ç”»é¢ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç®¡ç†ã‚µãƒ¼ãƒ“ã‚¹
//  ç†è§£åº¦ã«å¿œã˜ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿”ã™
//

import Foundation

@MainActor
class CompletionMessageService {
    static let shared = CompletionMessageService()
    
    private init() {}
    
    // ç†è§£åº¦ã«å¿œã˜ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆ10æ®µéš Ã— 3ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰
    private let messages: [Int: [String]] = [
        0: [
            "ã¾ã å§‹ã¾ã£ãŸã°ã‹ã‚Šï¼ã“ã‚Œã‹ã‚‰ä¸€ç·’ã«é ‘å¼µã‚Šã¾ã—ã‚‡ã†ğŸ’ª",
            "æœ€åˆã®ä¸€æ­©ã‚’è¸ã¿å‡ºã—ã¾ã—ãŸã­ã€‚ç¶™ç¶šãŒåŠ›ã«ãªã‚Šã¾ã™âœ¨",
            "å­¦ç¿’ã®ã‚¹ã‚¿ãƒ¼ãƒˆã§ã™ã€‚å°‘ã—ãšã¤ç©ã¿é‡ã­ã¦ã„ãã¾ã—ã‚‡ã†ğŸ“š"
        ],
        10: [
            "å°‘ã—ãšã¤ç†è§£ãŒæ·±ã¾ã£ã¦ãã¾ã—ãŸã­ã€‚ã“ã®èª¿å­ã§ã™ï¼ğŸŒ±",
            "åŸºç¤ãŒå°‘ã—ãšã¤èº«ã«ã¤ã„ã¦ãã¦ã„ã¾ã™ã€‚ç¶šã‘ã¾ã—ã‚‡ã†ğŸ’«",
            "æœ€åˆã®å£ã‚’è¶Šãˆã¾ã—ãŸã€‚æ¬¡ã‚‚é ‘å¼µã‚Šã¾ã—ã‚‡ã†ğŸš€"
        ],
        20: [
            "åŸºç¤ãŒå°‘ã—ãšã¤å›ºã¾ã£ã¦ãã¾ã—ãŸã€‚è‰¯ã„ãƒšãƒ¼ã‚¹ã§ã™ğŸ“–",
            "ç†è§£ãŒé€²ã‚“ã§ãã¾ã—ãŸã­ã€‚ç¶™ç¶šã¯åŠ›ãªã‚Šã§ã™ğŸ’ª",
            "é †èª¿ã«å­¦ç¿’ãŒé€²ã‚“ã§ã„ã¾ã™ã€‚ã“ã®èª¿å­ã§é ‘å¼µã‚Šã¾ã—ã‚‡ã†âœ¨"
        ],
        30: [
            "ç€å®Ÿã«æˆé•·ã—ã¦ã„ã¾ã™ã­ã€‚ã‚‚ã†å°‘ã—ã§åŠåˆ†ã§ã™ï¼ğŸ¯",
            "å­¦ç¿’ãŒç¿’æ…£åŒ–ã—ã¦ãã¾ã—ãŸã€‚ç´ æ™´ã‚‰ã—ã„ã§ã™ğŸŒŸ",
            "ç†è§£åº¦ãŒä¸ŠãŒã£ã¦ãã¦ã„ã¾ã™ã€‚ç¶™ç¶šãŒå®Ÿã‚’çµã‚“ã§ã„ã¾ã™ğŸ“ˆ"
        ],
        40: [
            "æŠ˜ã‚Šè¿”ã—åœ°ç‚¹ã§ã™ï¼å¾ŒåŠã®å•é¡Œã‚‚é ‘å¼µã‚Šã¾ã—ã‚‡ã†ğŸ’ª",
            "åŠåˆ†ã¾ã§æ¥ã¾ã—ãŸã€‚ã“ã®èª¿å­ã§é€²ã‚ã¾ã—ã‚‡ã†ğŸ‰",
            "å­¦ç¿’ã®ãƒšãƒ¼ã‚¹ãŒæ´ã‚ã¦ãã¾ã—ãŸã­ã€‚ç´ æ™´ã‚‰ã—ã„ã§ã™âœ¨"
        ],
        50: [
            "é †èª¿ã«å­¦ç¿’ãŒé€²ã‚“ã§ã„ã¾ã™ã€‚ã‚ã¨å°‘ã—ã§3åˆ†ã®2ã§ã™ğŸ“š",
            "ç†è§£åº¦ãŒä¸ŠãŒã£ã¦ãã¾ã—ãŸã€‚è‰¯ã„æ„Ÿã˜ã§ã™ğŸŒŸ",
            "ç¶™ç¶šã®æˆæœãŒå‡ºã¦ãã¦ã„ã¾ã™ã€‚ã“ã®èª¿å­ã§ã™ğŸ’«"
        ],
        60: [
            "å¥½èª¿ã§ã™ï¼ç†è§£ãŒæ·±ã¾ã£ã¦ãã¦ã„ã¾ã™ã­ğŸ¯",
            "å­¦ç¿’ãŒé †èª¿ã«é€²ã‚“ã§ã„ã¾ã™ã€‚ç´ æ™´ã‚‰ã—ã„ãƒšãƒ¼ã‚¹ã§ã™ğŸ“ˆ",
            "ç†è§£åº¦ãŒé«˜ã¾ã£ã¦ãã¾ã—ãŸã€‚ã‚ã¨å°‘ã—ã§ã™ğŸ’ª"
        ],
        70: [
            "é«˜ã„ç†è§£åº¦ã§ã™ï¼ã‚ã¨å°‘ã—ã§å®Œæˆã§ã™ğŸŒŸ",
            "ç´ æ™´ã‚‰ã—ã„é€²æ—ã§ã™ã€‚ã‚‚ã†ã™ãã‚´ãƒ¼ãƒ«ãŒè¦‹ãˆã¦ãã¾ã—ãŸğŸ‰",
            "ç†è§£ãŒæ·±ã¾ã£ã¦ã„ã¾ã™ã€‚æœ€å¾Œã¾ã§é ‘å¼µã‚Šã¾ã—ã‚‡ã†âœ¨"
        ],
        80: [
            "ã»ã¼å®Œå£ã«ç†è§£ã—ã¦ã„ã¾ã™ï¼æœ€å¾Œã®ä»•ä¸Šã’ã‚’é ‘å¼µã‚Šã¾ã—ã‚‡ã†ğŸ’ª",
            "ã‚ã¨å°‘ã—ã§å®Œç’§ã§ã™ã€‚ç´ æ™´ã‚‰ã—ã„åŠªåŠ›ã§ã™ğŸ¯",
            "é«˜ã„ç†è§£åº¦ã‚’é”æˆã—ã¦ã„ã¾ã™ã€‚æœ€å¾Œã¾ã§æ°—ã‚’æŠœã‹ãšã«ğŸ“š"
        ],
        90: [
            "ç´ æ™´ã‚‰ã—ã„ç†è§£åº¦ã§ã™ï¼å„ªç§€ãªiOSã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã§ã™ã­ğŸ‰",
            "éå¸¸ã«é«˜ã„ç†è§£åº¦ã‚’é”æˆã—ã¾ã—ãŸï¼ç´ æ™´ã‚‰ã—ã„ã§ã™ğŸŒŸ",
            "é«˜ã„ç†è§£åº¦ã§ã™ã€‚ã‚ãªãŸã¯iOSé–‹ç™ºã®å®ŸåŠ›è€…ã§ã™âœ¨"
        ],
        100: [
            "å®Œç’§ã§ã™ï¼ã‚ãªãŸã¯å¤©æ‰iOSã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã§ã™ğŸ§‘â€ğŸ’»",
            "100%é”æˆãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼å®Œç’§ãªç†è§£åº¦ã§ã™ğŸŒŸ",
            "å®Œç’§ãªç†è§£åº¦ã§ã™ã€‚ã‚ãªãŸã¯iOSé–‹ç™ºã®å¤©æ‰ã§ã™âœ¨"
        ]
    ]
    
    // ç†è§£åº¦ã‹ã‚‰ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å–å¾—
    func getMessage(for understandingRate: Int) -> String {
        // ç†è§£åº¦ã‚’10%å˜ä½ã§åˆ‡ã‚Šæ¨ã¦ï¼ˆä¾‹: 35% â†’ 30%ï¼‰
        let level = (understandingRate / 10) * 10
        
        // è©²å½“ã™ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é…åˆ—ã‚’å–å¾—
        guard let levelMessages = messages[level],
              let message = levelMessages.randomElement() else {
            // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆé€šå¸¸ã¯ç™ºç”Ÿã—ãªã„ï¼‰
            return "ãŠç–²ã‚Œæ§˜ã§ã—ãŸğŸ˜Š"
        }
        
        return message
    }
}
